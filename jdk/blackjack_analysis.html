---
title: "blkjck_stock_preanalysis"
author: "Jack Kincannon"
date: "12/3/2020"
output: pdf_document
---

<link href="/rmarkdown-libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="/rmarkdown-libs/anchor-sections/anchor-sections.js"></script>


<div id="r-markdown" class="section level2">
<h2>R Markdown</h2>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:</p>
<pre class="r"><code>dat1 &lt;- read_csv(&quot;data/blkjckhands.csv&quot;)</code></pre>
<pre><code>## Warning: Missing column names filled in: &#39;X1&#39; [1]</code></pre>
<pre><code>## Warning: 1 parsing failure.
##    row col   expected    actual                   file
## 898078  -- 21 columns 5 columns &#39;data/blkjckhands.csv&#39;</code></pre>
<pre class="r"><code>dat2 &lt;- read_csv(&quot;data/all_stocks_5yr.csv&quot;)</code></pre>
<pre><code>## Warning: 2 parsing failures.
##    row  col   expected    actual                      file
## 618445 date date like  2015-09   &#39;data/all_stocks_5yr.csv&#39;
## 618445 NA   7 columns  1 columns &#39;data/all_stocks_5yr.csv&#39;</code></pre>
<pre class="r"><code>glimpse(dat1)</code></pre>
<pre><code>## Observations: 898,078
## Variables: 21
## $ X1          &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4, 5, 0, …
## $ PlayerNo    &lt;chr&gt; &quot;Player1&quot;, &quot;Player2&quot;, &quot;Player3&quot;, &quot;Player4&quot;, &quot;Player5&quot;, &quot;P…
## $ card1       &lt;dbl&gt; 7, 10, 9, 2, 10, 6, 10, 3, 10, 9, 10, 3, 10, 9, 5, 10, 2,…
## $ card2       &lt;dbl&gt; 10, 9, 8, 10, 2, 1, 4, 10, 2, 6, 4, 5, 2, 10, 1, 10, 9, 5…
## $ card3       &lt;dbl&gt; 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 2, 0, 0, 10, 0, 1, 0, 0,…
## $ card4       &lt;dbl&gt; 0, 0, 0, 5, 5, 10, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 5,…
## $ card5       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ sumofcards  &lt;dbl&gt; 17, 19, 17, 17, 17, 25, 14, 13, 12, 15, 14, 14, 12, 19, 1…
## $ dealcard1   &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, …
## $ dealcard2   &lt;dbl&gt; 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, …
## $ dealcard3   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 0, …
## $ dealcard4   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,…
## $ dealcard5   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ sumofdeal   &lt;dbl&gt; 18, 18, 18, 18, 18, 18, 23, 23, 23, 23, 23, 23, 26, 26, 2…
## $ blkjck      &lt;chr&gt; &quot;nowin&quot;, &quot;nowin&quot;, &quot;nowin&quot;, &quot;nowin&quot;, &quot;nowin&quot;, &quot;nowin&quot;, &quot;no…
## $ winloss     &lt;chr&gt; &quot;Loss&quot;, &quot;Win&quot;, &quot;Loss&quot;, &quot;Loss&quot;, &quot;Loss&quot;, &quot;Loss&quot;, &quot;Win&quot;, &quot;Wi…
## $ plybustbeat &lt;chr&gt; &quot;Beat&quot;, &quot;Plwin&quot;, &quot;Beat&quot;, &quot;Beat&quot;, &quot;Beat&quot;, &quot;Bust&quot;, &quot;DlBust&quot;…
## $ dlbustbeat  &lt;chr&gt; &quot;Dlwin&quot;, &quot;Beat&quot;, &quot;Dlwin&quot;, &quot;Dlwin&quot;, &quot;Dlwin&quot;, &quot;PlBust&quot;, &quot;Bu…
## $ plwinamt    &lt;dbl&gt; 0, 20, 0, 0, 0, 0, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20…
## $ dlwinamt    &lt;dbl&gt; 10, 0, 10, 10, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ ply2cardsum &lt;dbl&gt; 17, 19, 17, 12, 12, 7, 14, 13, 12, 15, 14, 8, 12, 19, 6, …</code></pre>
<pre class="r"><code>#if (dat1$winloss == &quot;win&quot;) {
  # create a new column
#}
# create new binary winloss variables 

# summary statistics for interesting values ply2cardsum/card1/card2/dealcard1/dealcard2/winloss/blkjack
summary(dat1$ply2cardsum)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    2.00   12.00   14.00   14.22   18.00   21.00       1</code></pre>
<pre class="r"><code>summary(dat1$card1)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   5.000   8.000   7.126  10.000  11.000</code></pre>
<pre class="r"><code>summary(dat1$card2)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1.00    4.00    8.00    7.09   10.00   11.00</code></pre>
<pre class="r"><code>summary(dat1$dealcard1)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   1.000   5.000   8.000   7.171  10.000  11.000       1</code></pre>
<pre class="r"><code>summary(dat1$dealcard2)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    1.00    5.00    8.00    7.13   10.00   11.00       1</code></pre>
<pre class="r"><code>summary(dat1$winloss)</code></pre>
<pre><code>##    Length     Class      Mode 
##    898078 character character</code></pre>
<pre class="r"><code># create new variables
summary(dat1$blkjck)</code></pre>
<pre><code>##    Length     Class      Mode 
##    898078 character character</code></pre>
<pre class="r"><code># first vis
# x needs to be play2cardsum/sumofcards and y is percentage of win/loss

# second vis
# x is dealcard1 and y is winloss/dlbustbeat

# third vis 
# ply2cardsum y is percent plybustbeat

# plot blackjacks for fun </code></pre>
<pre class="r"><code>#Determine hit or stand based on ply2cardsum

#determine hit or stand based on dealcard1

# combine the two, show chart of all possibilities 
# ply2card sum (or possible hands) == rows and dealcard1 == col</code></pre>
<pre class="r"><code>glimpse(dat2)</code></pre>
<pre><code>## Observations: 618,445
## Variables: 7
## $ date   &lt;date&gt; 2013-02-08, 2013-02-11, 2013-02-12, 2013-02-13, 2013-02-14, 2…
## $ open   &lt;dbl&gt; 15.07, 14.89, 14.45, 14.30, 14.94, 13.93, 14.33, 14.17, 13.62,…
## $ high   &lt;dbl&gt; 15.12, 15.01, 14.51, 14.94, 14.96, 14.61, 14.56, 14.26, 13.95,…
## $ low    &lt;dbl&gt; 14.63, 14.26, 14.10, 14.25, 13.16, 13.93, 14.08, 13.15, 12.90,…
## $ close  &lt;dbl&gt; 14.75, 14.46, 14.27, 14.66, 13.99, 14.50, 14.26, 13.33, 13.37,…
## $ volume &lt;dbl&gt; 8407500, 8882000, 8126000, 10259500, 31879900, 15628000, 11354…
## $ Name   &lt;chr&gt; &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;, &quot;AAL&quot;,…</code></pre>
</div>
<div id="stock-analysis" class="section level2">
<h2>Stock Analysis</h2>
<pre class="r"><code># pick stock and find S&amp;P total value

# plot some summary stats for stock/S&amp;P price/volume/TTR</code></pre>
<pre class="r"><code>open1 &lt;- na.omit(dat2$open)
close1 &lt;- na.omit(dat2$close)
high1 &lt;- na.omit(dat2$high)
low1 &lt;- na.omit(dat2$low)

# dat3 &lt;- data.frame(high = high1, low = low1, close = close1, check.rows = FALSE)
# attempt at making a high-low-close df for BBands

rsi_dat &lt;- dat2 %&gt;%
  summarise(rsi = RSI(open1, n = 14, maType = &quot;SMA&quot;))

volatility_dat &lt;- dat2 %&gt;%
  summarise(vol = volatility(close1, n = 10, calc = &quot;close&quot;, N = 260))

#bbands_dat &lt;- dat2 %&gt;%
  #select(high, low, close)

bbands &lt;- BBands(close1, n = 20, maType = SMA)
# try to compute bbands with high-low-close

momentum_dat &lt;- dat2 %&gt;%
  summarise(momentum(close1, n = 1))
# perhaps compare long momentum and short momentum in some way?

macd_dat &lt;- dat2 %&gt;%
  summarise(macd = MACD(open1, nFast=12, nSlow=26, nSig=9, maType= &quot;SMA&quot;, percent = FALSE))</code></pre>
<pre class="r"><code># identify and explain all indicators 

# q1 part 2 
# plot all indicators over full time period

# describe signals and draw circles/lines on plot to show 

# DONT DO Q2 twice double check PROJ PROPOSAL</code></pre>
<p>Note that the <code>echo = FALSE</code> parameter was added to the code chunk to prevent printing of the R code that generated the plot.</p>
</div>
